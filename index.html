<!DOCTYPE html>
<html>

<head>
  <title>Has Youtube Playlists Enhancer</title>
  <meta charset="utf-8" />
</head>

<body>
  <p>Has Youtube Playlists Enhancer</p>
  <button id="fetch-videos">Fetch Playlist Videos</button>
  <p id="videoslist"></p>

  <script>
    function getPlaylistID() {
      var match, playList_ID, playlist_url;
      playlist_url = "https://www.youtube.com/playlist?list=PLsyeobzWxl7poL9JTVyndKe62ieoN-MZ3";

      let regex = /list=([a-zA-Z0-9_-]+)/;
      match = playlist_url.match(regex);

      if (match) {
        playList_ID = match[1];
        console.log("Playlist ID:", playList_ID);
      } else {
        console.log("Could not extract playlist ID.");
      }
      return playList_ID;
    }


    // Replace 'YOUR_API_KEY' with your actual API key
    const apiKey = 'AIzaSyBirpEydenGZDoSY4ED0lXGmD0F57y6C9o';

    function fetchPlaylistVideos(playlistId, pageToken, videos, index) {
      let url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${playlistId}&key=${apiKey}`;
      if (pageToken) {
        url += `&pageToken=${pageToken}`;
      }
      fetch(url)
        .then(response => response.json())
        .then(data => {
          // Process the data.items array
          data.items.forEach(item => {
            console.log(item.snippet.title); // Log the title of each video
            videos[index] = item.snippet.title;
            index += 1;
          });

          // Check if there are more pages
          if (data.nextPageToken) {
            videos, index = fetchPlaylistVideos(playlistId, data.nextPageToken, videos, index);
          }
        })
        .catch(error => console.error('Error fetching data: ', error));
      return videos, index
    }

    document.getElementById('fetch-videos').addEventListener('click', function () {
      var playlistId = getPlaylistID(); // Replace with your actual playlist ID
      const videos = []; var index = 0; 
      videos, index = fetchPlaylistVideos(playlistId, videos, index);
      document.getElementById('videosList').innerHTML = videos;
    });
    
  </script>
</body>

</html>