<!DOCTYPE html>
<html>

<head>
  <title>Has Youtube Playlists Enhancer</title>
  <meta charset="utf-8" />
  <script type="module" src="index.js"></script>
</head>

<body>
  <h1>Has Youtube Playlists Enhancer</h1>
  <h3>You can enter in the playlist url below and the search term.</h3>
  <h3>Alternatively you can navigate to the playlist using the frame below</h3>
  <label>Playlist URL:</label>
  <input type="text" name="urlInput" id="urlInput"><br><br>
  <label>Search Playlist</label>
  <input type="text" name="searchInput" id="searchInput"><br><br>
  <button type="button" onclick="getAllVideos()">Display Videos</button>
  <button type="button" onclick="searchVideos()">Search Through Playlist</button><br>
  <iframe src="playlistsLibrary.html" style="height: 80%; width: 80%;" id="iframeId"></iframe>
  <p id="videosList">Videos will be displayed here</p>

  <script>
    async function getAllVideos() {
      var playlistId = getPlaylistID(); // Replace with your actual playlist ID
      const allVideos = await fetchPlaylistVideos(playlistId, '', []);
      console.log(allVideos); // This will log all the videos from the playlist
      var paragraph = document.getElementById('videosList');

      // Clear the paragraph content
      paragraph.innerHTML = '';

      // Iterate over the array and append each element to the paragraph
      allVideos.forEach(function (element) {
        // Create a text node for each element
        var textNode = document.createTextNode(element);

        // Append the text node to the paragraph
        paragraph.appendChild(textNode);
        paragraph.appendChild(document.createElement('br'));
      });
      return allVideos;
    }
  </script>

  <script>
    async function searchVideos() {
      const videos = await getAllVideos();
      var searchTerm = document.getElementById('searchInput').value;
      var paragraph = document.getElementById('videosList');
      // Filter the array
      var filteredArray = videos.filter(function (element) {
        return element.toLowerCase().includes(searchTerm.toLowerCase());
      });
      console.log("The filtered array is:");
      console.log(filteredArray);
      // Rewrite the paragraph content
      paragraph.innerHTML = 'The search results are as follows:';
      paragraph.appendChild(document.createElement('br'));

      // Iterate over the array and append each element to the paragraph
      filteredArray.forEach(function (element) {
        // Create a text node for each element
        var textNode = document.createTextNode(element);

        // Append the text node to the paragraph
        paragraph.appendChild(textNode);
        paragraph.appendChild(document.createElement('br'));
      });
    }
  </script>
</body>

</html>